node{
  stage('Github'){
    git 'https://github.com/sebsot/deploy'
  }

  stage('SonarQube Analysis') {
    def mvn = tool 'Default Maven';
    withSonarQubeEnv() {
      sh "${mvn}/bin/mvn clean verify sonar:sonar -Dsonar.projectKey=jenkins-deploy -Dsonar.projectName='jenkins-deploy'"
    }
  }
}

/*
 def mvnHome = tool name: 'Maven'
    withSonarQubeEnv('jenkins-deploy'){
      sh "${mvnHome}/bin/mvn sonar:sonar"

sh 'mvn clean install sonar:sonar'
*/
    
